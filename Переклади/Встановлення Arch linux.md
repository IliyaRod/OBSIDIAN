[[Category:Installation process (Українська)]]
[[bg:Installation guide]]
[[cs:Installation guide]]
[[de:Arch Install Scripts]]
[[el:Installation guide]]
[[en:Installation guide]]
[[es:Installation guide]]
[[fa:راهنمای تازه‌کاران]]
[[fi:Installation guide]]
[[fr:Installation guide]]
[[it:Installation guide]]
[[ja:インストールガイド]]
[[ko:Installation guide]]
[[pl:Installation guide]]
[[pt:Installation guide]]
[[ru:Installation guide]]
[[sv:Installation guide]]
[[th:Installation guide]]
[[tr:Installation guide]]
[[zh-hans:Installation guide]]
[[zh-hant:Installation guide]]

Цей документ - посібник зі встановлення [[Arch Linux]] використовуючи живу систему завантажену з інсталяційного носія заснованого на офіційному сайті Arch linux.  Образ встановлення надає функції для людей з обмеженими можливостями, які описані на сторінці [[Встановлення Arch Linux з функціями доступності]]

Перед встановленням рекомендовано ознайомитися з [[Часті питання]]. Конвенції використані в цьому документі доступні у [[Довідка по прочитанню|довідці по прочитанню]]. Подекуди приклади можуть містити змінні (відформатовані {{ic|''курсивом''}}), їх слід замінити вручну.

Для більш детальної інформалції перегляньте статті на [[Про ArchWiki|ArchWiki]] присвячені конкретним темам,  [[Сторінки man|сторінки man]]. Обидва джерела мають посилання в цьому посібнику. Онлайн-допомогу можна отримати на [https://bbs.archlinux.org/ форумі]

Arch Linux повинен запускатися на будь-якому [https://uk.wikipedia.org/wiki/X86-64 x86_64] сумісному комп'ютері. Необхідно принаймні 512 MiB оперативної пам'яті (саме стільки потрібно для живого оточення встановлення), базове встановлення займає трохи менше 2GiB дискового простору. В процесі встановлення потрібно встановити пакети з віддалених репозиторіїв, тобто цей посібник вимагає задіяного інтернет-з'єднання.

== Передвстановлення ==

=== Отримання образу встановлення ===

Відвідайте [[https://archlinux.org/download/ сторінку завантаження]]]] та в залежності від ваших потреб оберіть ISO файл або netboot образ та необхідні [[Про GnuPG|GnuPG]] сигнатури

=== Перевірка цифрового підпису === 

Рекомендовано перевірити сигнатури образу перед використанням, особливо тоді коли  його було завантажено з ''HTTP дзеркала''  

На системах з передвстановленим [[Про GnuPG|GnuPG]], зробіть це завантаживши ISO PGP сигнатури  (під **Контрольними сумами на сторінці завантаження**) до дерикторії з ISO образом та ввівши 

$ gpg --keyserver-options auto-key-retrieve --verify archlinux-_version_-x86_64.iso.sig

Також аналогічну операцію можна виконати з уже встановленої системи Arch Linux

```
$ pacman-key -v archlinux-_version_-x86_64.iso.sig
```

> **Примітка:** 
> - сигнатури можуть бути змінені якщо вони були завантажені з дзеркала, замість **archlinux.org**. В такому випадку переконайтеся що публічний ключ, який використовується для декодування сигнатур -- авторизований іншим довіреним ключем. Команда  `gpg`  виведе відбиток публічного ключа
> - Іншим методом перевірки достовірність сигнатур -- засвідчити відбиток ключа у **розробника Arch Linux** який видавав ISO-файл. Ознайомтеся з **Wikipedia:Публічні ключі** для детальнішої інформації про публічні ключі та проце авторизації ключів

## 1.3 Підготовка носія встановлення

Образ встановлення може бути підключений до цільового пристрою з допомогою **USB-флешки**, **оптичного диску** чи з завдяки мережі з допомогою **PXE**. Слідуйте наведеним вище посібникам для того щоб підготувати інсталяційний носій з допомогою завантаженого образу

## 1.4 Завантажтеся в живе оточення

> **Примітка:** образ встановлення Arch Linux не підтримує технологію Secure Boot. Вам слід **вимкнути Secure Boot** для тоо щоб завантажитися в інсталяційний носій. За необхідності, **Secure Boot** можна налаштувати після завершення встановлення.

1. Позначте один з завантажувальних пристроїв який містить на собі інсталяційний образ Arch Linux. Завзвичай цього можна досягти  натисненням спеціальної клавіші на **POST** фазі завантаження, яка влючає в себе сплеш екран. Ознайомтеся з інструкцією до своєї материнської плати для отримання додаткових деталей
2. Коли інсталяційний носій завантажиться з'явиться меню. В ньому слід обрати `_Arch Linux install medium` та натснути **Enter** для вибору середовища встановлення

> **Порада:** Інсталяційний образ використовує **GRUB** для UEFI та **syslinux** для BIOS завантаження. Перегляньте **README.bootparams** щоб детальніше ознайомитися з **параметрами завантаження**

3. Ви увійдете до **віртуальної консолі** як рут користувач, та побачите **оболонку ZSH**

Для того щоб перемкнутися на іншу консоль -- використовуйте **скорочення** `Alt + стрілка` . Для того щоб редагувати файли конфігурації доступні **mceddit**, **nano**, **vim**. Для ознайомлення з переліком пакетів доступних в живому оточенні перегляньте **pkglist.x86_64.txt**

## 1.5 Встановлення розкладки клавіатури

За замовчуванням розуладка клавіатури консолі -- **US**. Для перегляду доступних розкладок виконайте

```
# ls /usr/share/kbd/keymaps/**/*.map.gz
```

Для того щоб встановити розкладку клавіатури з допомогою **loadkeys** ,  з відповідного файлу впишіть його назву без розширення та шляху. Відтак щоб встановити українську розкладку клавіатури можна запустивши:

```
# loadkeys ua-utf
```

Консольні шрифти знаходяться в `/usr/share/kbd/consolefonts/` і їх так само можна використати з допомогою **setfont(8**):

```
# setfont UniCyr_8x16
```

## 1.6 Перевірка режиму завантаження

Для того,щоб перевірити режим завантаження,  огляньте директорію **efivars**

```
# ls /sys/firmware/efi/efivars
```

Якщо вищенаведена команда показує вміст без помилок -- це означає що система завантажена в режимі UEFI, якщо ж вивід команди вказує на те що директорія відстуня -- це означає, що система завантажена в **BIOS** (або **СSM**) режимі. Якщо режим в якому завантажена система не той який вам потрібен, зверніться до інструкції вашої материнської плати

## 1.7 Підключення до мережі

Для того щоб задіяти мережеве з'єднання в живому оточенні, слідуйте наступним крокам:

- Переконайтеся що ваший **мережевий інтерфейс** є в переліку та задіяний. Наприклад для цього можна використовувати  **ip-link** 

```
# ip link
```

- Для бездротових та WWAN інтерфейсів переконайтеся що ваша мережева карта працює належним чином з допомогою **rfkill**

-  Підєднайтеся до мережі наступним чином:
	- Ethernet -- підключіть кабель
	- Wi-Fi -- авторизуйтеся з в бездротовій мережі з допомогою **iwctl** наступним чином
	- для того щоб переглянути список бездротових мережевих пристроїв використовуйте 
	
	```
	# iwctl station list
	```
	
	 - щоб просканувати доступні мережі використовуйте 
	 
	```
	# iwctl <пристрій> scan
	```
	
	- щоб переглянути список доступних мереж 
	
	```
	# iwctl <пристрій> get-networks
	```
	
	-  Щоб задіяти мережу 
	
	 ```
	 # iwctl station <пристрій> connect <назва мережі>
	```
	- Мобільна мережа -- авторизуйтеся в мобільній мережі з допомогою **mmcli**

- Налаштуйте ваше мережеве з'єднання
	- **DHCP:** динамічні IP та DNS сервери доступні (завдяки **systemd-networkd** та **systemd-resolved**) повинно працювати без проблем з Ethernet, WLAN, та WWAN мережевих інтерфейсів
	- Статична IP адреса -- слідуйте **Налаштування мережі#Статична IP адреса**

- З'єднання можна перевірити з допомогою **ping:**
```
# ping archlinux.org
```

> **Примітка:** в інсталяційному образі **systemd-networkd**, **systemd-resolved**, **iwd** та **ModemManager** -- передналаштовані та увімкненні за замовчуванням, навідмінно від встановленої системи

## 1.8 Синхронізація системного годинника

В живому оточенні **systemd-timesyncd** увімнений за замовчуванням. Час автоматично синхронізується коли мережеве підключення буде задіяно
Використовуйте **timedatectl** щоб переконатися, що системий годинник точний 

```
# timedatectl status
```

## 1.9 Розбивка диску

Живе оточення визначає диски як block пристрої, такі як  `/dev/nvme0n1` або `/dev/mmcblk0`. Для того щоб ідентифікувати пристрої, використовуйте **lsblk** або fdisk

```
# fdisk -l
```

В такому випадку `rom`, `loop` або `airoot` пристрої будуть проігноровані

Наступні **розділи** НЕОБХІДНІ для обраного пристрою:
- Один розділ для root директорії `/`
- Для завантаження в UEFI режимі -- **EFI розділ системи**

Якщо вам потрібно створити будь-який об'єднаний розділ для **LVM**, шифрування системи чи **RAID** зробіть це зараз.

Використовуйте fdisk або parted для того щоб модифікувати таблицю розділів. Наприклад 

```
# fdisk _/dev/<диск який потрібно розділити>
```

> **Примітки:** 
> - Якшо диск не відображається, **переконайтеся що його контролер не в режимі RAID**
> - Якщо диск з якого ви плануєте завантажуватися **уже містить EFI розділ** -- не створюйте ще один, а використовуйте уже наявний натомість
> - **SWAP** простір може бути створений як **swap файл** для файлових систем які це підтримують

### 1.9.1 Приклад розбивки диску 

EFI з **GPT**

| Точка монтування | Розділ                    | Тип розділу           | Необхідний розмір                |
| ---------------- | ------------------------- | --------------------- | -------------------------------- |
| /mnt/boot        | /dev/<EFI розділ системи> | EFI system partition  | Не менше 300 MiB                 |
| [SWAP]           | /dev/<розділ swap>        | Linux swap            | Більш ніж 512 MiB                |
| /mnt             | /dev/<root розділ>        | Linux x86-64 root (/) | Решта вільного місця на пристрої |

1. інші точки монтування, такі як `/mnt/efi` можуть знадобитися для того, щоб встановити на них завантажувач, який надає можливість завантажувати ядро та initramfs образ з root розділу. Зверніть увагу на попередження в Arch процес **завантаження#Завантажувач**

BIOS з **MBR** 

| Точка монтування | Розділ             | Тип розділу           | Необхідний розмір                |
| ---------------- | ------------------ | --------------------- | -------------------------------- |
| [SWAP]           | /dev/<розділ swap> | Linux swap            | Більш ніж 512 MiB                |
| /mnt             | /dev/<root розділ> | Linux x86-64 root (/) | Решта вільного місця на пристрої |

Ознайомтеся також з **Розбивка диску#Приклади розбивок**

## 1.10 Форматування розділів

Новостворені розділи потрібно відформатувати в доречні файлові системи. Ознайомтеся з **Файлові системи#Створити файлову систему** для більш детальної інформації

Наприклад для того щоб створити файлову систему Ext4 на `/dev/<root розділі>` виконайте

```
# mkfs.ext4 /dev/<root розділ>
```

Якщо вам потрібно створити розділ для **SWAP** ініціалізуйте його з допомогою **mkswap** 

> **Примітка:** для складених block пристроїв замініть `/dev/*_розділ` на відповідний шлях до block пристрою

Якщо ви створюєте EFI розділ системи, відформатуйте його в FAT32 використвовуючи **mkfs.fat** 

> **Увага:** Форматуйте EFI розділ лише в тому випадку якщо ви створили його під час процесу розбивки диску. Якщо у вас уже є EFI розділ на диску, переформатування її може знищити завантажувач інших встановлених операційних систем

```
# mkfs.fat -F 32 /dev/<EFI розділ системи>
```

## 1.11 Монтування файлової системи 

**Змонтуйте** root розділ диску до `/mnt`. Наприклад, якщо root розділ знаходиться на `/dev/<root розділ>` тоді:

```
# mount /dev/<root розділ> /mnt
```

Створіть точки монтування вказані вище (як от `/mnt/efi`) та примонтуйте до них відповідні розділи

>**Порада:** Запустіть **mount** з параметром `--mkdir` для того щоб створити відповідну точку монтуванння. Також можна створити точку монтування використовуючи **mkdir** перед командою `mount`

 Для UEFI систем, змонтуйте EFI розділ системи:
```
# mount --mkdir /dev/<EFI розділ системи> /mnt/boot
```

Якщо ви створили **SWAP** розділ, активуйте його з допомогою **swapon** 

```
# swapon /dev/<SWAP розділ>
```

genfstab потім побачить всі змонтовані файлові системи та swap простір

# 2 Встановлення

## 2.1 Вибір дзеркал

Пакети які будуть встановлені повинні бути завантажені з **дзеркального серверу**, які зазначені в `/etc/pacman.d/mirrorlist`. В живому оточенні, після під'єднання до інтернету, **reflector** оновить список дзеркал обравши 20 найсинхронізованіших HTTPS дзеркал та відсортує їх по рейтингу завантажень

Найвище розміщене дзеркало має найвищий пріоритет завантаження пакетів. Ви можете перевірити список дзеркал, для того щоб переконатися що він вас задовільняє. Якщо вас щось не влаштовує ви можете відретагувти перемістивши пріоритетніші для вас дзеркала вгору, додавши нові чи вилучивши ті які вас не задовільняють.

Цей файл потім буде скопійований до нововстановленої системи з допомогою pacstrap, тому дуже важливо щоб він був налаштований правильно.

## 2.2 Встановлення важливих пакетів

Використовуйте **pacstrap** скрипт для того щоб встановити **base** пакет, **ядро** Linux. та прошивку для більшості апаратного забезпечення

```
# pacstrap -K /mnt base linux linux-firmware
```

> **Порада:**
> - Ви можете замінити **linux** як пакет **ядра** на інший на ваш вибір, або взагалі пропустити коли встановлюєте в ** контейнер**
> - Вам слід пропустит встановлення пакету firmware під час встановлення в віртуальну машину чи контейнер

Пакет **base** не містить в собі всі засоби вбудовані в живе оточення, тому встановлення інших пакетів може знадобитися для повністю функціонального встановлення базової системи. Зокрема розглянемо встановлення:

- користувацькі утиліти для керування **файловими системами** які будуть використані в системі
- Утиліти для доступу до **RAID** або **LVM** розділів.
- Специфічну прошивку для інших пристроїв не вбудованих в **linux-firmware** (наприклад **sof-firmware** для аудіокарт)
- Програмне забезпечення необхідне для керування мережами (network manager, DHCP client, тощо)
- текстовий редактор
- пакети для доступу до документації в **man** та **info** сторінках: **mab-db**, **man-pages** та **texinfo**

Для того щоб **встановити** інші групи пакетів, додайте їхні імена після pacstrap розділивши іх пропусками, або використовуйте **pacman** підчас **chrot-ингу в нову систему**. Для порівняння пакетів нової системи та доступних в живій системі можна використати **pkglist.x86_64.txt**

# 3 Налаштування системи

## 3.1 Fstab

Згенеруйте **fstab** файл (використовуйте `-U` або `-L` для визначення по **UUID** чи заголовках відпоівдно)

```
# genfstab -U /mnt >> /mnt/etc/fstab
```


Перевірте результат в файлі `/mnt/etc/fstab`  та відредагуйте якщо виявите помилки в ньому

## 3.2 Chroot

**Увійдіть** у нововстановлену систему

```
# arch-chroot /mnt
```

## 3.3 Часові зони 

Задайте **часову зону**

```
# ln -sf /usr/share/zoneinfo/<Регіон>/<Місто> /etc/localtime
```

Запустіть **hwclock** для того щоб згенерувати `/etc/adjtime`

```
# hwclock --systohc
```

Ця команда припускає що внутрішній годинник комп'ютера встановлений в **UTC** 

## 3.4 Локалізація

**Відредагуйте** `/etc/locale.gen` . Розкоментуйте  `en_US.UTF-8 UTF-8` ,`uk_UA.UTF8 UTF8` та інші необхідні **локалі**. Згенеруйте локалі виконавши:

```
# locale-gen
```

Створіть **locale.conf** файл, та встановіть мову 
```
/etc/locale.conf

LANG=uk_UA.UTF-8
```

Якщо ви **вибрали розкладку клавіатури**, зробіть зміни постійними в [vconsole.conf(5)](https://man.archlinux.org/man/vconsole.conf.5):

```
/etc/vconsole.conf

KEYMAP=_ua-utf_
FONT=_UniCyr_8x16_
```

## 3.5 Налаштування мережі

Створіть файл [hostname](https://wiki.archlinux.org/title/Hostname "Hostname"):
```
/etc/hostname

myhostname
```


Додайте відповідні записи в [hosts(5)](https://man.archlinux.org/man/hosts.5):

```
/etc/hosts

127.0.0.1	localhost
::1		localhost
127.0.1.1	myhostname.localdomain	myhostname
```


Якщо система має постійну IP-адресу, то вона повинна бути записана замість `127.0.1.1`

## 3.6 Initramfs

Створення нового _initramfs_ зазвичай не обов'язкове, тому що **mkinitcpio** запустився на етапі встановлення пакету **ядра** з *pacstrap* 

Для LVM, шифрування системи або RAID, відредагуйте [mkinitcpio.conf(5)](https://man.archlinux.org/man/mkinitcpio.conf.5) та замініть initramfs образ:

```
# mkinitcpio -P
```

## 3.7 Root пароль

Встановіть root **пароль**

```
# passwd
```

## 3.8 Завантажувач

Обкріть та встановіть Linux-сумісний **завантажувач** Якщо у вас процесор від Intel або AMD, активувавши оновлення **microcode** 

# 4. Перезавантаження

Вийдіть з оточення chroot ввівши `exit`, або натиснувши `Ctrl+d` 

Також додатково демонтуйте всі розділи з допомогою `umount -R /mnt`. Це дозволяє помітити будь-які "Зайняті" розділи, та знайти причини з допомогою [fuser(1)](https://man.archlinux.org/man/fuser.1)

Нарешті, перезапустіть комп'ютер прописавши `reboot` - всі розділи які були примонтовані будуть демонтовані з допомогою systemd. Не забудьте вилучити інсталяційний носій. Після перезавантаження  ввійдіть в нову систему як користувач root.

# 5. Пост-встановлення

Перегляньте загальні рекомендації по управлінню системо, та пост інсталяційні посібники (створення акаунта звичайного користувача, встановлення графічного інтерфейсу користувача, звук, тачпад і так далі)