[[Category:Installation process (Українська)]]
[[bg:Installation guide]]
[[cs:Installation guide]]
[[de:Arch Install Scripts]]
[[el:Installation guide]]
[[en:Installation guide]]
[[es:Installation guide]]
[[fa:راهنمای تازه‌کاران]]
[[fi:Installation guide]]
[[fr:Installation guide]]
[[it:Installation guide]]
[[ja:インストールガイド]]
[[ko:Installation guide]]
[[pl:Installation guide]]
[[pt:Installation guide]]
[[ru:Installation guide]]
[[sv:Installation guide]]
[[th:Installation guide]]
[[tr:Installation guide]]
[[zh-hans:Installation guide]]
[[zh-hant:Installation guide]]

{{Translateme (Українська)|No updates since page restauration 2020-04-19.}}
Цей документ є посібником із встановлення [[Про Arch Linux|Arch Linux]] з живої системи завантаженої з офіційного ISO-образу. Перед встановленням радимо переглянути [[часті питання]]. Конвенції використані в цьому документі доступні у [[Довідка по прочитанню|довідці по прочитанню]]. Зокрема зразки коду можуть містити змінні, які слід змінити самостійно, зазначені {{ic|''курсивом''}}.

Більш детальні інструкції доступні у відповідних статтях [[Про ArchWiki|ArchWiki]] або [[Сторінки man|сторінках man]], посилання на обидвох присутні в цьому посібнику. Також доступні [[канали чату Arch Linux]] та [https://bbs.archlinux.org/ форум] якщо необхідна допомога.

Arch Linux має завантажуватись на [[Wikipedia:uk:X86-64|x86_64]]-сумісному компʼютері з як мінімум of 512 МіБ ОП. Звичайне встановлення повинно зайняти менше 800 МіБ дискового простору. Оскільки процес встановлення потребує отримання пакетів із віддалених сховищ, цей посібник передбачає наявність інтернет-зʼєднання.

== Підготовка до встановлення ==

ISO-образ для встановлення та його [[Про GnuPG|GnuPG]]-підпис можна отримати з [https://archlinux.org/download/ сторінки завантаження].

=== Перевірте цифровий підпис ===

Рекомендуємо перевірити підпис образу перед використанням, особливо при завантаженні із ''HTTP-дзеркала'', де завантаження як правило вразливі до перехоплення та [https://www2.cs.arizona.edu/stork/packagemanagersecurity/attacks-on-package-managers.html роздачі шкідливих образів].

На системах з встановленим [[Про GnuPG|GnuPG]] завантажте ''PGP-підпис'' (під ''Checksums'') до теки із завантаженим ISO-образом та [[Про GnuPG#Перевірити цифровий підпис|перевірте його цифровий підпис]] з допомогою:

 $ gpg --keyserver-options auto-key-retrieve --verify archlinux-''version''-x86_64.iso.sig

З вже встановленої Arch Linux-системи замість цього можна зробити перевірку цифрового підпису з допомогою:

 $ pacman-key -v archlinux-''version''-x86_64.iso.sig

{{Примітка|
* Цифровий підпис може бути замінений якщо його завантажити з дзеркала, тому краще завантажуйте його з [https://archlinux.org/download/ archlinux.org]. В такому разі переконайтесь що публічний ключ використаний для розшифрування є підписаний іншим ключем, якому можна довіряти. Використайте команду {{ic|gpg}} для виводу відбитку відкритого ключа. 
* Інший спосіб перевірити справжність підпису - це переконатись, що відбиток відкритого ключа відповідає відбитку ключа від [https://archlinux.org/people/developers/ розробника Arch Linux] який підписав ISO-файл. Дивіться [[Wikipedia:uk:Асиметричні алгоритми шифрування]] для отримання додаткової інформації про процес перевірки справжності відкритого ключа.
}}

=== Завантажте живе середовище ===

Живе середовище можливо завантажити з [[Завантажувальна USB-флешка|USB-флешки]], [[Записувач оптичних дисків#Запис|оптичного диску]] чи мережі з [[Про PXE|PXE]]. Інші способи встановлення доступні у [[:Category:Installation process (Українська)]].

* Вказати поточний пристрій завантаження який містить образ встановлення Arch Linux. Цього зазвичай можна досягнути натиснувши клавішу протягом [[Wikipedia:uk:POST|POST]]-фази так, як це вказано на стартовій заставці. Для деталей зверніться до посібника своєї материнської плати.
* Коли зʼявиться меню Arch Linux, виберіть ''Boot Arch Linux'' і натисніть {{ic|Enter}} щоб зайти у оточення встановлення.
* Для списку [[Параметри ядра Linux#Налаштування|параметрів завантаження]] дивіться [https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio-archiso/blob/master/docs/README.bootparams README.bootparams], а для списку встановлених пакунків — [https://gitlab.archlinux.org/archlinux/archiso/blob/master/configs/releng/packages.x86_64 packages.x86_64].
* Вас введе в систему на першій [[Wikipedia:Virtual console|віртуальній консолі]] як користувача root та надасть командну оболонку [[Про Zsh|Zsh]].

Для перемикання в іншу консоль, наприклад щоб переглянути цю статтю в [[Про ELinks|ELinks]] паралельно з встановленням, використовуйте [[скорочення клавіатури]] {{ic|Alt+''стрілки''}}. Для [[редагування]] файлів налаштування доступні [[Про nano#Використання|nano]], [[Wikipedia:uk:vi|vi]] та [[Про vim#Використання|vim]].

=== Виберіть розкладку клавіатури ===

[[Розкладка консолі]] за замовчуванням — [[Wikipedia:File:KB United States-NoAltGr.svg|US]]. Перегляньте доступні розкладки з допомогою:

 # ls /usr/share/kbd/keymaps/**/*.map.gz

Щоб змінити розкладку, додайте відповідну назву файлу до {{man|1|loadkeys}}, забравши шлях та розширення. Наприклад для української розкладки:

 # loadkeys ua-utf

[[Консольні шрифти]] знаходяться в {{ic|/usr/share/kbd/consolefonts/}} і їх так само можна використати з допомогою {{man|8|setfont}}:

 # setfont UniCyr_8x16

=== Перевірте режим завантаження ===

Якщо на [[Про UEFI|UEFI]] материнській платі увімкнено UEFI-режим, [[Про Archiso|Archiso]] [[завантажить]] Arch Linux з допомогою [[systemd-boot (Українська)]]. Переглянтьте теку [[UEFI#UEFI variables|efivars]] щоб це перевірити:

 # ls /sys/firmware/efi/efivars

Якщо теки не існує, систему можна завантажити в режимах [[Wikipedia:uk:BIOS|BIOS]] чи CSM. Дивіться посібник своєї материнської плати.

=== Підключіться до інтернету ===

Щоб налаштувати інтернет-зʼєднання, пройдіться по наступних кроках:

* Переконайтесь що ваш [[мережевий інтерфейс]] є доступний і ввімкнений, наприклад з допомогою {{man|8|ip-link}}: {{bc|# ip link}}
* Приєднайтесь до мережі. Вставте Ethernet кабель чи [[Налаштування безпровідної мережі|приєднайтесь до локальної безпровідної мережі]].
* Налаштуйте ваше інтернет-зʼєднання:
** [[Налаштування мережі#Постійна IP-адреса|Постійна IP-адреса]]
** Змінна IP-адреса: використайте [[Про DHCP|DHCP]].
*:{{Примітка|Образ встановлення вмикає [[Про dhcpcd|dhcpcd]] ({{ic|dhcpcd@''interface''.service}}) для [https://gitlab.archlinux.org/archlinux/archiso/-/blob/769fbecef3ea7411c6e68ff1c4838f49b7c5d648/configs/releng/airootfs/etc/udev/rules.d/81-dhcpcd.rules дротових мережевих пристроїв] при завантаженні.}}
* Зʼєднання можна перевірити з допомогою [[Wikipedia:uk:ping|ping]]: {{bc|# ping archlinux.org}}

=== Оновіть системний годинник ===

Використайте {{man|1|timedatectl}} щоб задати правильний системний час:

 # timedatectl set-ntp true

Щоб перевірити статус сервісу використайте {{ic|timedatectl status}}.

=== Розбийте диск ===

Коли роспізнані живою системою, дискам присвоєно [[блоковий пристрій]] такий як {{ic|/dev/sda}} чи {{ic|/dev/nvme0n1}}. Щоб опізнати ці пристрої використайте [[Про lsblk|lsblk]] або ''fdisk'':

 # fdisk -l

На результати що закінчуються {{ic|rom}}, {{ic|loop}} чи {{ic|airoot}} можна не зважати.

Наступні [[розділи]] є '''необхідними''' для вибраного пристрою:

* Один розділ для кореневої теки {{ic|/}}.
* Якщо увімкнено [[Про UEFI|UEFI]] – [[Системний розділ EFI]].

Якщо ви хочете створити будь-які складені блокові пристрої для [[Про LVM|LVM]], [[Про dm-crypt|шифрування системи]] чи [[Про RAID|RAID]], то робіть це зараз.

==== Приклади розбиття ====

{| class="wikitable"
!colspan="5" | BIOS з [[Про MBR|MBR]]
|-
! Точка монтування
! Розділ
! [[Wikipedia:uk:Partition type|Тип розділу]]
! Пропонований розмір
|-
| {{ic|/mnt}}
| {{ic|/dev/sd''X''1}}
| Linux
| Залишок пристрою
|-
| [SWAP]
| {{ic|/dev/sd''X''2}}
| Linux swap
| Більше ніж 512 МіБ
|-
!colspan="5" | UEFI з [[Про GPT|GPT]]
|-
! Точка монтування
! Розділ
! [[Wikipedia:GUID Partition Table#Partition type GUIDs|Partition type]]
! Пропонований розмір
|-
| {{ic|/mnt/boot}} or {{ic|/mnt/efi}}
| {{ic|/dev/sd''X''1}}
| [[Системний розділ EFI]]
| 260–512 МіБ
|-
| {{ic|/mnt}}
| {{ic|/dev/sd''X''2}}
| Linux x86-64 root (/)
| Залишок пристрою
|-
| [SWAP]
| {{ic|/dev/sd''X''3}}
| Linux swap
| Більше ніж 512 МіБ
|-
|}

Дивіться також [[Розбиття диску#Приклади розбиття]].

{{Примітка|
* Використовуйте [[Про fdisk|fdisk]] або [[Про parted|parted]] для редагування таблиці розділів, наприклад: {{ic|fdisk /dev/sd''X''}}.
* [[Про swap|Swap]] простір може бути розміщений на [[swap-файл]]і на файловій системі що їх підтримує.
}}

=== Форматуйте розділи ===

Створені розділи потрібно форматувати, кожен відповідною [[Файлові системи|файловою системою]]. Наприклад якщо коренева тека є на {{ic|/dev/sd''X''1}} та буде містити файлову систему {{ic|''ext4''}} то виконайте:

 # mkfs.''ext4'' /dev/sd''X1''

Якщо ви створили розділ для swap, започаткуйте його з допомогою ''mkswap'' та увімкніть з допомогою ''swapon'':

 # mkswap /dev/sd''X2''
 # swapon /dev/sd''X2''

Для деталей дивіться [[Файлові системи#Створення файлової системи]].

=== Монтуйте файлові системи ===

[[Монтуйте]] файлову систему на кореневу теку до {{ic|/mnt}}, наприклад:

 # mount /dev/sd''X1'' /mnt

Створіть всі решту точок монтувань, що залишилися (такі як {{ic|/mnt/efi}}) та змонтуйте їх відповідні розділи.

Опісля, {{man|8|genfstab}} знайде монтовані файлові системи та swap-простір.

== Встановлення ==

=== Виберіть дзеркало ===

Пакунки що будуть встановлені мають бути завантажені з [[Дзеркала|серверів-здеркал]], які визначені в {{ic|/etc/pacman.d/mirrorlist}}. На живій системі усі дзеркала є увімкненими та сортованими за їх статусом синхронізації та швидкості на час коли образ встановлення був створений.

Чим вище дзеркало в списку, тим більший воно має пріоритет коли заватажується пакет. Бажано відредагувати файл відповідним чином та перемістити дзеркала, розташовані найближче географічно у верхню частині списку, хоча слід враховувати й інші критерії.

Цей файл буде скопійовано потім до новоствореної системи командою ''pacstrap'', тому вартує його виправити вже зараз.

=== Встановіть необхідні пакети ===

Використайте скрипт {{man|8|pacstrap}} для встановлення пакунку {{Pkg|base}}, [[Про ядро Linux|ядра Linux]] та прошивок для поширених пристроїв:

 # pacstrap /mnt base linux linux-firmware

{{Порада|Можна замінити {{Pkg|linux}} на пакунок [[Про ядро Linux|ядра Linux]] на ваш вибір. Ви можете пропустити встановлення ядра Linux або пакету прошивок якщо ви дійсно знаєте що робите ;-)}}

Пакунок {{Pkg|base}} не містить усіх засобів присутніх на живій системі, тому встановлення інших пакетів може знадобитися для повністю функціональної базової системи. Зокрема, розгляньте встановлення:

* користувацьких засобів для роботи з [[файлові системи|файловими системами]], що будуть використовуватися в системі,
* засоби доступу до розділів [[Про RAID|RAID]] чи [[Про LVM|LVM]],
* особливі прошивки для інших пристроїв відсутні у {{Pkg|linux-firmware}},
* програми необхідні для [[мережі]],
* [[редактор тексту]],
* пакунки для доступу до документації в [[сторінки man|сторінках man]] та [[Сторінки info|сторінках info]]: {{Pkg|man-db}}, {{Pkg|man-pages}} та {{Pkg|texinfo}}.

Для [[встановлення]] інших пакунків чи груп пакунків, додайте їх назви до команди ''pacstrap'' вище (розділено пробілами) або використайте [[Про pacman|pacman]] коли [[#Chroot|зайшли chroot в нову систему]]. Для порівняння, пакунки доступні в живій системі можна знайти в [https://gitlab.archlinux.org/archlinux/archiso/blob/master/configs/releng/packages.x86_64 packages.x86_64].

== Налаштуйте нову систему ==

=== Fstab ===

Генеруйте [[файл fstab]] (використайте {{ic|-U}} або {{ic|-L}} щоб визначити диск за [[Стійкі імена блокових пристроїв|UUID]] або підписом, відповідно):

 # genfstab -U /mnt >> /mnt/etc/fstab

Перевірте результат у {{ic|/mnt/etc/fstab}} та відредагуйте його в разі помилки.

=== Chroot ===

[[Про chroot|Змініть кореневу теку]] в нову систему:

 # arch-chroot /mnt

=== Часова зона ===

Встановіть [[часову зону]]:

 # ln -sf /usr/share/zoneinfo/''Region''/''City'' /etc/localtime

Виконайте {{man|8|hwclock}} щоб створити {{ic|/etc/adjtime}}:

 # hwclock --systohc

Ця команда має на увазі, що апаратний годинник встановлений на [[Wikipedia:uk:UTC|UTC]]. Для деталей дивіться [[Системний час#Стандарт часу]].

=== Локалізація ===

Розкоментуйте {{ic|en_US.UTF-8 UTF-8}} та інші потрібні [[Про локаль|локалі]] в {{ic|/etc/locale.gen}}, та створіть їх з допомогою:

 # locale-gen

Створіть {{man|5|locale.conf}} та встановіть [[змінну]] {{ic|LANG}} відповідно:

{{hc|1=/etc/locale.conf|2=
LANG=''uk_UA.UTF-8''
}}

Якщо ви [[#Виберіть розкладку клавіатури|вибрали розкладку клавіатури]], зробіть зміни постійними в {{man|5|vconsole.conf}}:

{{hc|1=/etc/vconsole.conf|2=
KEYMAP=''ua-utf''
FONT=''UniCyr_8x16''
}}

=== Налаштування мережі ===

Створіть файл [[hostname]]:

{{hc|/etc/hostname|
''myhostname''
}}

Додайте відповідні записи в {{man|5|hosts}}:

{{hc|/etc/hosts|
127.0.0.1	localhost
::1		localhost
127.0.1.1	''myhostname''.localdomain	''myhostname''
}}

Якщо система має постійну IP-адресу, то вона повинна бути записана замість {{ic|127.0.1.1}}.

Завершіть [[налаштування мережі]] для нововстановленої системи, включно з встановленням програм для мережі на ваш смак.

=== Initramfs ===

Створення нової ''initramfs'' зазвичай не потрібно, бо [[Про mkinitcpio|mkinitcpio]] було виконано при встановленні пакунка [[Про ядро Linux|ядра Linux]] з ''pacstrap''.

Для [[Встановлення Arch Linux на LVM#Додання ґаків mkinitcpio|LVM]], [[Про dm-crypt|шифрування системи]] чи [[Про RAID#Налаштування mkinitcpio|RAID]], змініть {{man|5|mkinitcpio.conf}} та пересворіть образ initramfs:

 # mkinitcpio -P

=== Пароль root ===

Встановіть [[пароль]] для root:

 # passwd

=== Завантажувач Linux ===

Виберіть та встановіть Linux-сумісний [[завантажувач Linux]]. Якщо у вас Intel або AMD процесор, додатково увімкніть оновлення [[Мікрокод]]у.

== Перезавантажте систему ==

Вийдіть з оточення chroot з допомогою команди {{ic|exit}} або комбінації клавіш {{ic|Ctrl+d}}.

Необовʼязково вручну відмонтуйте всі розділи з допомогою {{ic|umount -R /mnt}}: це дозволяє помітити "зайняті" розділи, та знайдіть причину з допомогою {{man|1|fuser}}.

Насамкінець перезавантажте компʼютер ввівши команду {{ic|reboot}}: будь-які змонтовані розділи будуть автоматично відмонтовані ''systemd''. Не забудьте вийняти засіб встановлення та потім увійти в нову систему як користувач root.

== Після встановлення ==

Для керування системою та інструкцій після встановлення (наприклад налаштування графічного інтерфейсу користувача, звуку чи тачпада) дивіться [[Загальні рекомендації]].

Для переліку програм що можуть вас зацікавити дивіться [[Список програм]].
